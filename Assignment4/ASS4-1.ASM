STACK 	SEGMENT	PARA	STACK
		DW		100H DUP(?)
STACK	ENDS

DATA	SEGMENT	PARA
	LEN		EQU 12
	CHAR 	DB 	'X'
	STR1 	DB 	'CHENQIXIAN',13,10,'$'
	MSG1 	DB 	'X IN CHENQIXIAN',13,10,'$'
	MSG2	DB 	'NOT FOUND X IN CHENQIXIAN',13,10,'$'
	STR2	DB	LEN DUP(?)
DATA 	ENDS

CODE 	SEGMENT PARA
		ASSUME	CS:CODE,DS:DATA,SS:STACK
OUTPUT	MACRO MSG
		PUSH 	AX
		PUSH 	DX
		MOV 	DX,OFFSET MSG
		MOV 	AH,9
		INT 	21H
		POP		DX
		POP 	AX
		ENDM

DELX 	PROC
	DELETEX:
		PUSH 	BP
		MOV 	BP,SP
		PUSH 	SI
		PUSH 	DI
		PUSH 	CX
		PUSH 	AX

		MOV 	SI,[BP+4]
		MOV 	DI,[BP+6]
		MOV 	CX,LEN

	DELX_LP:
		LODSB
		CMP 	AL,'X'
		JE 		DELX_CONTINUE
		STOSB
	DELX_CONTINUE:	
		LOOP 	DELX_LP

	DELETEXRET:
		MOV 	AL,'$'
		STOSB
		POP 	AX
		POP 	CX
		POP 	DI
		POP 	SI
		POP 	BP
		RET 	4
DELX 	ENDP

FIND_CH PROC
	FINDCHAR:
		PUSH 	BP
		MOV 	BP,SP
		PUSH 	AX
		PUSH	DI
		PUSH 	CX

		MOV	 	AX,[BP+4]
		MOV 	DI,[BP+6]
		MOV		CX,LEN

		CLD
		REPNZ 	SCASB
		JZ 		FOUND
		OUTPUT  MSG2
		JMP 	SHORT FINDCHARRET
	FOUND:
		OUTPUT	MSG1
		MOV		DX,OFFSET STR1
		PUSH 	DX
		PUSH 	DX
		CALL 	DELX
	FINDCHARRET:
		POP 	CX
		POP 	DI
		POP 	AX
		POP 	BP
		RET 	4
FIND_CH ENDP

MAIN	PROC 	FAR
	MAINPROC:
		MOV 	AX,DATA
		MOV 	DS,AX
		MOV 	ES,AX

		MOV 	DX,OFFSET STR1
		PUSH 	DX
		MOV 	DL,CHAR
		XOR 	DH,DH
		PUSH 	DX
		CALL 	FIND_CH

	EXIT:	
		MOV 	AX,4C00H
		INT 	21H
MAIN 	ENDP

CODE 	ENDS
		END 	MAIN